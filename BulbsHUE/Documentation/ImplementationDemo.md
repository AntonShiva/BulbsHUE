# Демонстрация системы цветов пресетов

## Что было реализовано

### 1. Новые модели данных
- **PresetColorEntity**: Управление цветами пресетов
- **PresetColor**: Отдельные цвета с приоритетом
- **ColorDistributionStrategy**: Стратегии распределения цветов

### 2. Обновленная архитектура
- Расширен **EnvironmentSceneEntity** для поддержки цветов
- Обновлены все места создания сцен в репозиториях

### 3. Новые сервисы
- **PresetColorService**: Применение цветов к лампам
- Интеграция с **LightColorStateService** и **LightingColorService**

### 4. Добавлены цвета для пресетов Pastel Section 1

#### Реализованные пресеты с цветами:

**Golden Haze** 
- `#FCC474` (Основной золотистый)
- `#FFB836` (Яркий золотой) 
- `#E8D1AD` (Бежевый)
- `#DAA520` (Глубокий золотой)
- `#DEB887` (Песочный)

**Dawn Dunes**
- `#F4A460` (Песочный коричневый)
- `#D2B48C` (Рыжевато-коричневый)
- `#C68E17` (Темно-золотистый)
- `#DEB887` (Желтовато-коричневый)
- `#F0E68C` (Хаки)

**Whispering Sands**
- `#F5F5DC` (Бежевый)
- `#CE9158` (Темно-золотистый)
- `#FFD4A3` (Персиковый)
- `#FAE7E6` (Бледно-розовый)
- `#ECBC92` (Светло-коричневый)

**Echoed Patterns**
- `#E8875A` (Темно-лососевый)
- `#CD853F` (Перу)
- `#F4A460` (Песочный коричневый)
- `#D2691E` (Шоколадный)
- `#ECAA7F` (Светлый лососевый)

**Fading Blossoms**
- `#FFA07A` (Светло-лососевый)
- `#FFB6C1` (Светло-розовый)
- `#FFDAB9` (Персиковый)
- `#FFE4E1` (Туманно-розовый)
- `#FAEBD7` (Античный белый)

**Luminous Drift**
- `#E6E6FA` (Лавандовый)
- `#D8BFD8` (Чертополох)
- `#F0F8FF` (Алисово синий)
- `#B0E0E6` (Пыльно-голубой)
- `#ADD8E6` (Светло-голубой)

**Skybound Serenity**
- `#FFB6C1` (Светло-розовый)
- `#FFA07A` (Светло-лососевый)
- `#FAEBD7` (Античный белый)
- `#F0CA8C` (Светло-персиковый)
- `#AAD7F6` (Небесно-голубой)

**Horizon Glow**
- `#DB9DCF` (Светло-фиолетовый)
- `#F9C1B1` (Светло-персиковый)
- `#FAEFDD` (Кремовый)
- `#7E6A98` (Серо-фиолетовый)
- `#E2A6A4` (Пыльно-розовый)

**Ethereal Metropolis**
- `#F7D0D4` (Бледно-розовый)
- `#EE93B1` (Ярко-розовый)
- `#C77AAB` (Розовато-пурпурный)
- `#F872A0` (Ярко-пурпурный)
- `#EFAFC9` (Светло-розовый)

**Verdant Mist**
- `#D3DFFF` (Очень светло-синий)
- `#F3BDA2` (Светло-персиковый)
- `#F9C2E5` (Светло-розовый)
- `#FA8C8C` (Светло-красный)
- `#ECC1AF` (Светло-коричневый)

### 5. Логика распределения цветов

Реализованы алгоритмы распределения согласно лучшим практикам Philips Hue:

**Для 1 лампы**: Первый цвет (доминирующий)
**Для 2 ламп**: Первые два цвета
**Для 3 ламп**: Первые три из пяти цветов
**Для 4 ламп**: Первые четыре цвета  
**Для 5 ламп**: Все пять цветов
**Для 6+ ламп**: Циклическое повторение

### 6. Визуальные улучшения
- Индикаторы цветов на карточках сцен
- Отображение первых 3 цветов пресета
- Индикатор "+" для дополнительных цветов

### 7. Автоматическое применение
- При выборе сцены с цветами автоматически применяются к лампам
- Поддержка как одиночных ламп, так и комнат
- Асинхронное применение для лучшей производительности

## Как протестировать

1. Откройте раздел Environment → Pastel → Section 1
2. Выберите любой из 10 пресетов с цветами
3. Цвета автоматически применятся к выбранным лампам/комнате
4. Карточки пресетов показывают цветные индикаторы

## Следование правилам проекта

✅ **MVVM архитектура**: Логика в ViewModel, View только отображение
✅ **Clean Architecture**: Разделение на Domain, Data, Presentation слои
✅ **SOLID принципы**: Single Responsibility, Dependency Inversion
✅ **Swift 6 готовность**: Async/await, строгая типизация
✅ **Современные паттерны**: Dependency Injection, Service Layer
✅ **Обработка ошибок**: Typed errors, graceful fallbacks
✅ **Документация**: Подробные комментарии и README
